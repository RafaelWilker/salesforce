public class ClosedOpportunityTriggerHandler {
    public static void newTaskOnOpportunity(List<Opportunity> ListOpp){
        List<Task> TaskList = new List<Task>();
            
            for(Opportunity op : ListOpp){
        		if(op.StageName == 'Closed Won'){
            	Task teste = new Task(Subject='Follow Up Test Task', 
                                  WhatId = op.id);
                    TaskList.add(teste);
                    EmailManager.sendMail('rafaelwilker@hotmail.com', 'Status de Oportunidade alterado', 'Verifique a fase da oportunidade ' + op.Name + '.');
        		}
                
    		}
            if(TaskList.size() > 0){
                insert TaskList;
      }
    }
}
